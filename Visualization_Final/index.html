<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>H1B Employment Analysis</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,500,300,900,100' rel='stylesheet'
          type='text/css'>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="js/jquery.bootpag.min.js"></script>
    <script type="text/javascript" src="js/handlebars-v4.0.10.js"></script>
    <script src="js/d3-scale-chromatic.v0.3.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/accounting.min.js"></script>

    <script src="lib/util/box.js"></script>
    <script src="lib/part1.js"></script>
    <script src="lib/part2.js"></script>
    <script src="lib/part3.js"></script>
    <script src="lib/part5.js"></script>
    <script src="lib/part6.js"></script>
    <script src="lib/map.js"></script>
    <script src="lib/sub_chart/median_wage.js"></script>

    <link href="css/style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div style="width:100%;height:75px;background-color:#ffffff;border-bottom: 1px solid #d5d5d6;margin-bottom: 10px;">


    <div style="background-color: #e58c72;height: 100%;width:250px;line-height: 75px;text-align: center;color:#FFFFFF;font-size: 1.5em"
         class="pull-left">
        <img src="img/logo.png" height="50px" style="padding-right:10px">Final Project <span style="font-size: 16px;line-height:75px "> (CS498)</span>
    </div>
    <div style="line-height: 75px;margin-left:20px;color:#6e6e74;font-size: 1.4em" class="pull-left">
        H1B Employment Analysis (2011 - 2016)
    </div>

</div>

<div id="exTab" class="container">
    <div class="row">
        <div class="col-sm-4 custom_padding">
            <div class="bg">
                <div class="title-header">
                    <div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination" id="pagination">

                            </ul>
                        </nav>
                    </div>
                </div>
                <div style="margin: auto;" id="left_panel">
                    <div style="width: 100%;height: 250px;padding:10px 20px 20px 20px" id="left_summary" >

                    </div>
                    <div style="width: 100%;height: 100%" id="bottom_chart">
                        <div class="panel-header">
                            <div class="pull-left heading-style" id="bottom_header" style="font-size: 14px">
                                Top 5 H1B Applicants (2011-2016)
                            </div>
                        </div>
                        <div style="margin: auto;" id="div_sub">
                            <svg height="250" id="svg_sub">

                            </svg>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8 custom_padding">
            <div class="bg">
                <div class="panel-header">
                    <div class="pull-left heading-style" id="main_header">
                        Top 5 H1B Applicants (2011-2016)
                    </div>
                </div>
                <div id="content_main">
                    <div style="margin: auto;" id="div_main">
                        <svg height="540" id="svg_main">

                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/babel" src="lib/app.jsx"></script>

<script>
$( document ).ready(function() {
    loadCompanyData();
    loadBoxPlotData();
    loadJobData();
    loadWageData();
    $("#left_summary").html(Handlebars.compile($("#page1").html()));


    $("#bottom_chart").hide();

    $('#pagination').bootpag({
        total: 7
    }).on("page", function (event, num) {
        console.log(num);
        switch (num){
            case 1:
                $("#main_header").html("Top 5 H1B Applicants (2011-2016)");
                $("#bottom_chart").hide();
                drawAppTrend(out);

                $("#left_summary").html(Handlebars.compile($("#page1").html()));
                break;
            case 2:
                $("#main_header").html("Top 5 H1B Applicants - Product Development Companies (2011-2016)");

                $("#bottom_chart").hide();
                $("#svg_main").removeClass("box");
                var template = Handlebars.compile($("#page2").html());
                $("#left_summary").html(template);

                $("#toggleChart2").click(function(){
                    if(document.getElementById('toggleChart2').checked) {
                        drawAppTrend(soft);
                    } else {
                        drawSortwithOut();
                    }
                });

                drawSortwithOut();


                break;
            case 3:
                $("#left_summary").html(Handlebars.compile($("#page3").html()));
                $("#main_header").html("Wage Distribution of 2016 H1B Applications - Outsourcing Companies");
                $("#bottom_chart").show();
                drawBoxPlot(data_out,"#1575B5","box_blue",68869);
                $('#bottom_header').html("Median Wage Yearly Trend (2011 - 2016)");
                showMedianTrend(INFOSYS_MEDIAN,"INFOSYS","#004CD5");
                break;
            case 4:
                $("#left_summary").html(Handlebars.compile($("#page4").html()));
                $("#main_header").html("Wage Distribution of 2016 H1B Applications - Product Companies");
                $("#bottom_chart").show();
                drawBoxPlot(data_soft,"#a51c18","box_red",101088,68869,"#1575B5");
                $('#bottom_header').html("Median Wage Yearly Trend (2011 - 2016)");
                showMedianTrend(MICROSOFT_MEDIAN,"MICROSOFT","red");
                break;
            case 5:
                $("#left_summary").html(Handlebars.compile($("#page5").html()));
                $("#main_header").html("Most Applied Job Titles (2011-2016)");
                drawJobTitle();
                $("#bottom_chart").hide();
                break;
            case 6:
                $("#left_summary").html(Handlebars.compile($("#page6").html()));
                $("#main_header").html("Wage Distribution of the Most Applied Job Titles (2011-2016)");
                drawWageBoxPlot();
                $("#bottom_chart").hide();
                break;
            case 7:
                $("#left_summary").html(Handlebars.compile($("#page7").html()));
                $("#main_header").html("Geographical Distribution of H1B Applications (2011-2016)");
                drawMap();
                $("#bottom_chart").hide();
                break;
        }
    });
})
</script>

<script id="page2" type="text/x-handlebars-template">
    <div>
        <div>
            <H4>Product Development Companies:</H4>
            <p style="color:#666">
                The grouped column chart here shows the top 5 applicants
                of the H1B program among the <b>Product Development Companies</b>.
            </p>
            <p style="color:#666">
                The Company Names are in x-axis and number of applications are in y-axis.
                The colors of the column chart indicates different years.
            </p>
            <p style="color:#666">
                The previous chart ( Top 5 H1B Applicants - Outsourcing Companies ) can
                also be seen at the background. This provides a <b>visual comparison</b> of the
                two charts.
            </p>
            <p style="color:#666">
                <ul><li style="color:#666">We can see that the number of application filed by the Product Development Companies
            are much lower than the Outsourcing Companies.</li></ul>

            </p>
            <p style="color:#666">
                Please click on the checkbox below to reset the y-scale of the chart according
                to the range of the Product Development Companies.
            </p>
        </div>
        <div>
            <label><input type="checkbox" value="" id="toggleChart2"> Reset Y Scale</label>
        </div>
    </div>
</script>


<script id="page1" type="text/x-handlebars-template">
    <div>
        <H4>H1B Employment Analysis:</H4>
        <p style="color:#666">
            We will be studying the H1B application data 2011 - 2016
            provided by USCIS (United States Citizenship and Immigration Services).
        </p>
        <p style="color:#999;font-size:12px;">
            "The US H-1B visa is a non-immigrant visa that allows US companies to
            employ graduate level workers in specialty occupations that require
            theoretical or technical expertise in specialized fields such as in
            IT, finance, engineering, mathematics, science, medicine, etc." - Wikipedia
        </p>
        <H4>Top 5 H1B Applicants are Outsourcing Companies:</H4>
        <p style="color:#666">
            The grouped column chart here shows that, the top 5 applicants of the H1B program
            from 2011 till 2016 are all Outsourcing Companies (Infosys, Tata Consultancy Services, Wipro, IBM, Accenture).
        </p>
        <p style="color:#666">
            The Company Names are in x-axis and number of applications are in y-axis.
            The colors of the column chart indicates different years.
        </p>
        <p style="color:#666">
            <ul style="color:#666">
                <li>Looks like Infosys filed maximum number of H1B applications.</li>
                <li>Generally the number of applications increased till 2015 from 2011,
                    then there is a small dip in 2016.</li>
            </ul>
        </p>

    </div>
</script>

<script id="page3" type="text/x-handlebars-template">
    <div>
        <H4 style="font-size:15px;">Wage Distribution - Outsourcing Companies:</H4>
        <p style="color:#666;font-size:12px">
            The box plot shows the wage distribution of the outsourcing companies (Top 5 Applicants) for 2016
            applications. On hover the box plot will display the numeric data.
        </p>
        <p style="color:#666;font-size:12px">
            The median wage offered by the outsourcing companies in 2016 has been highlighted
            using a blue horizontal line, which is <b>$68,869</b> per year.
        </p>
        <p style="color:#666;font-size:12px">
            Click on any of the box plot to view the yearly trend of median wage for any
            specific outsourcing company from 2011 - 2016 below.
            By default the trend of median wage offered by Infosys has been displayed.
        </p>
    </div>
</script>

<script id="page4" type="text/x-handlebars-template">
    <div>
        <H4 style="font-size:15px;">Wage Distribution - Product Companies:</H4>
        <p style="color:#666;font-size:12px">
            The box plot shows the wage distribution of the product companies (Top 5 Applicants) for 2016
            applications. On hover the box plot will display the numeric data.
            The yearly trend of median wage for specific product company will be displayed
            in below chart.
        </p>
        <p style="color:#666;font-size:12px">
            The median wage offered by the product companies in 2016 has been highlighted
            using a red horizontal line (blue for outsourcing companies), which is <b>$101,088</b> per year.
        </p>
        <p>
            <ul><li style="color:#666;font-size:12px">The difference between the median wage offered
        by outsourcing vs product companies is around <b>$30,000</b>.</li></ul>
        </p>
    </div>
</script>


<script id="page5" type="text/x-handlebars-template">
    <div>
        <H4>Most Applied Job Titles:</H4>
        <p style="color:#666;">
            The bar plot shows the top 15 most applied job titles from 2011 - 2016.
        </p>

        <p style="color:#666;">
            <ul>
                <li style="color:#666;">Interesting fact is most of the job
                    titles are related to IT/Software Industry
                </li>
                <li style="color:#666;">Programming Analyst is the highest applied job title.</li>
            </ul>
        </p>
        <p style="color:#666;">
            On hover the actual number of applications will be displayed using tooltip.
        </p>
    </div>
</script>

<script id="page6" type="text/x-handlebars-template">
    <div>
        <H4>Wage Distribution of the Most Applied Job Titles:</H4>
        <p style="color:#666;">
            The box plot shows the wage distribution of the 15 most applied job Titles
            from 2011 - 2016 (previous chart).
        </p>

        <p style="color:#666;">
        <ul>
            <li style="color:#666;">
                The Senior Software Engineer has the highest median wage ($92K).
            </li>
            <li style="color:#666;">
                Even though Programming Analyst was the highest applied job title,
                the median wage is towards the lower side ($58K).</li>
            <li style="color:#666;">
                The median salary of assistant professor is lowest (52K) among
                the 15 most applied job titles, there are many outliers. This indicates
                many assistant professor's wage is more then $100K</li>
        </ul>
        </p>
        <p style="color:#666;">
            On hover of the box plot, the actual numeric data will be displayed using tooltip.
        </p>
    </div>
</script>


<script id="page7" type="text/x-handlebars-template">
    <div>
        <H4>Geographical Distribution of H1B Applications:</H4>
        <p style="color:#666;">
            The map shows the geographical distribution of H1B applications (2011 - 2016) across USA.
            By looking into the map we can location of most of the H1B employments.
        </p>

        <p style="color:#666;">
            The color of each state is based on the number of applications The legend is shown below the map.
        </p>

        <p style="color:#666;">
            The red circle highlights 50 top city provided as location in H1B Applications. The size of the circle depends
            on the number of applications.
        </p>
        <p style="color:#666;">
            On hover, the number of applications for each State/City will be displayed in tooltip.
        </p>
        <p style="color:#666;">
            <ul>
                <li style="color:#666;">Three states - New York, Texas, California have largest H1B employments.</li>
                <li style="color:#666;">We have used log scale to display the color.</li>
                <li style="color:#666;">The H1B jobs are concentrated to few specific cities.</li>
            </ul>
        </p>


    </div>
</script>

</body>
</html>